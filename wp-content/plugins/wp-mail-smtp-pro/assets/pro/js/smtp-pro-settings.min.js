"use strict";var WPMailSMTP=window.WPMailSMTP||{};WPMailSMTP.Admin=WPMailSMTP.Admin||{},WPMailSMTP.Admin.Settings=WPMailSMTP.Admin.Settings||{},WPMailSMTP.Admin.Settings.Pro=WPMailSMTP.Admin.Settings.Pro||function(e,o){var l=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},r={init:function(){o(e).ready(r.ready)},ready:function(){r.pageHolder=o(".wp-mail-smtp-tab-settings"),r.bindActions()},bindActions:function(){r.license.bindActions(),r.amazonses.bindActions()},license:{getNoticeHtml:function(e,s){return'<div class="notice '+e+' wp-mail-smtp-license-notice is-dismissible"><p>'+s+"</p>"},bindActions:function(){r.pageHolder.on("click","#wp-mail-smtp-setting-license-key-verify",this.verify),r.pageHolder.on("click","#wp-mail-smtp-setting-license-key-deactivate",this.deactivate),r.pageHolder.on("click","#wp-mail-smtp-setting-license-key-refresh",this.refresh)},verify:function(e){var i=jQuery(e.target),n=i.closest(".wp-mail-smtp-setting-row"),l=o("#wp-mail-smtp-setting-license-key",n),s={action:"wp_mail_smtp_pro_license_ajax",task:"license_verify",nonce:o("#wp-mail-smtp-setting-license-nonce",n).val(),license:l.val()};i.prop("disabled",!0),o.post(ajaxurl,s,function(e){var s,t,a;e.success?(s=e.data.message,t="check-circle-solid-green",a="green",n.find(".type, .desc, #wp-mail-smtp-setting-license-key-deactivate").show(),n.find(".type strong").text(e.data.type),l.prop("disabled",!0)):(s=e.data,t="exclamation-circle-regular-red",a="red",n.find(".type, .desc, #wp-mail-smtp-setting-license-key-deactivate").hide(),l.prop("disabled",!1)),r.license.displayModal(s,t,a),i.prop("disabled",!1)}).fail(function(e){console.log(e.responseText)})},deactivate:function(e){var i=jQuery(e.target),n=i.closest(".wp-mail-smtp-setting-row"),s={action:"wp_mail_smtp_pro_license_ajax",task:"license_deactivate",nonce:o("#wp-mail-smtp-setting-license-nonce",n).val()};i.prop("disabled",!0),o.post(ajaxurl,s,function(e){var s,t,a=e.data;e.success?(s="check-circle-solid-green",t="green",n.find("#wp-mail-smtp-setting-license-key").val(""),n.find(".type strong").text("lite"),n.find(".desc, #wp-mail-smtp-setting-license-key-deactivate").hide()):(s="exclamation-circle-regular-red",t="red"),o("#wp-mail-smtp-setting-license-key",n).prop("disabled",!1),r.license.displayModal(a,s,t),i.prop("disabled",!1)}).fail(function(e){console.log(e.responseText)})},refresh:function(e){e.preventDefault();var i=jQuery(e.target),n=i.closest(".wp-mail-smtp-setting-row"),s={action:"wp_mail_smtp_pro_license_ajax",task:"license_refresh",nonce:o("#wp-mail-smtp-setting-license-nonce",n).val()};i.prop("disabled",!0),o.post(ajaxurl,s,function(e){var s,t,a;e.success?(s=e.data.message,t="check-circle-solid-green",a="green",n.find(".type strong").text(e.data.type)):(s=e.data,t="exclamation-circle-regular-red",a="red",n.find(".desc, #wp-mail-smtp-setting-license-key-deactivate").hide(),o("#wp-mail-smtp-setting-license-key",n).prop("disabled",!1)),r.license.displayModal(s,t,a),i.prop("disabled",!1)}).fail(function(e){console.log(e.responseText)})},displayModal:function(e,s,t){o.alert({backgroundDismiss:!0,escapeKey:!0,animationBounce:1,theme:"modern",type:t,animateFromElement:!1,draggable:!1,closeIcon:!0,useBootstrap:!1,title:!1,icon:'"></i><img src="'+wp_mail_smtp_pro.plugin_url+"/assets/images/font-awesome/"+s+'.svg" style="width: 40px; height: 40px;" alt=""><i class="',content:e,boxWidth:"350px",buttons:{confirm:{text:wp_mail_smtp_pro.ok,btnClass:"btn-confirm",keys:["enter"]}}})}},amazonses:{bindActions:function(){jQuery(".js-wp-mail-smtp-providers-amazonses-email-add").on("click",this.processEmailAdd),r.pageHolder.on("click",".js-wp-mail-smtp-providers-amazonses-email-delete",this.processEmailDelete),r.pageHolder.on("click",".js-wp-mail-smtp-providers-amazonses-email-resend",this.processEmailResend),r.pageHolder.on("click",".js-wp-mail-smtp-providers-amazonses-email-resend-delete",this.processEmailResendDelete)},processEmailAdd:function(e){e.preventDefault();var s=jQuery(e.target),t=s.siblings('input[type="email"]'),a=t.val(),i=s.siblings('input[name="wp_mail_smtp_pro_amazonses_email_add"]').val(),n=jQuery("#wp-mail-smtp-providers-amazonses-email-enter");return!s.hasClass("disabled")&&(l(a)?void(a.length&&i.length&&jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"wp_mail_smtp_pro_providers_ajax",task:"email_add",mailer:"amazonses",email:a,nonce:i},beforeSend:function(){n.find("p.response").remove(),s.addClass("disabled")}}).done(function(e){var s="response";s+=e.hasOwnProperty("success")&&e.success?" success":" error",e.hasOwnProperty("success")&&e.success&&t.val(""),n.append('<p class="'+s+'">'+e.data+"</p>")}).fail(function(){n.append('<p class="response error">'+wp_mail_smtp_pro.ses_text_smth_wrong+"</p>")}).complete(function(){s.removeClass("disabled")})):(n.find("p.response").remove(),n.append('<p class="response error">'+wp_mail_smtp_pro.ses_text_email_invalid+"</p>"),!1))},processEmailDelete:function(e){if(e.preventDefault(),!confirm(wp_mail_smtp_pro.ses_text_email_delete))return!1;var s=jQuery(e.target).closest("a"),t=s.data("email"),a=s.data("nonce").toString();return!s.hasClass("disabled")&&(l(t)?void(t.length&&a.length&&jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"wp_mail_smtp_pro_providers_ajax",task:"email_delete",mailer:"amazonses",email:t,nonce:a},beforeSend:function(){s.addClass("disabled")}}).done(function(e){e.hasOwnProperty("success")&&e.success?s.closest("tr").fadeOut("fast",function(){this.remove()}):alert(e.data)}).fail(function(){alert(wp_mail_smtp_pro.ses_text_smth_wrong)}).complete(function(){s.removeClass("disabled")})):(alert(wp_mail_smtp_pro.ses_text_smth_wrong),!1))},processEmailResend:function(e){e.preventDefault();var s=jQuery(e.target).closest("a"),t=s.data("email"),a=s.data("nonce").toString();return!s.hasClass("disabled")&&(l(t)?void(t.length&&a.length&&jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"wp_mail_smtp_pro_providers_ajax",task:"email_add",mailer:"amazonses",email:t,nonce:a},beforeSend:function(){s.addClass("disabled"),s.text(wp_mail_smtp_pro.ses_text_sending)}}).done(function(e){e.hasOwnProperty("success")&&e.success&&s.html('<span class="dashicons dashicons-yes"></span> '+wp_mail_smtp_pro.ses_text_sent).fadeOut(1e3,function(){jQuery(this).text(wp_mail_smtp_pro.ses_text_resend),jQuery(this).fadeIn("fast")})}).fail(function(){alert(wp_mail_smtp_pro.ses_text_smth_wrong)}).complete(function(){s.removeClass("disabled")})):(alert(wp_mail_smtp_pro.ses_text_smth_wrong),!1))},processEmailResendDelete:function(e){if(e.preventDefault(),!confirm(wp_mail_smtp_pro.ses_text_email_delete))return!1;var s=jQuery(e.target).closest("a"),t=s.data("email"),a=s.data("nonce").toString();return!s.hasClass("disabled")&&(l(t)?void(t.length&&a.length&&jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"wp_mail_smtp_pro_providers_ajax",task:"email_resend_delete",mailer:"amazonses",email:t,nonce:a},beforeSend:function(){s.addClass("disabled")}}).done(function(e){e.hasOwnProperty("success")&&e.success?s.closest("tr").fadeOut("fast",function(){this.remove()}):alert(e.data)}).fail(function(){alert(wp_mail_smtp_pro.ses_text_smth_wrong)}).complete(function(){s.removeClass("disabled")})):(alert(wp_mail_smtp_pro.ses_text_smth_wrong),!1))},closeEmailAddPopup:function(){jQuery("#TB_closeWindowButton").click()}}};return r}(document,(window,jQuery)),WPMailSMTP.Admin.Settings.Pro.init();